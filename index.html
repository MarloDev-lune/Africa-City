<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Africa City</title>

  <!-- تحميل مكتبة EmailJS -->
  <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>

  <script type="text/javascript">
    (function() {
      emailjs.init("pDB0RvlQN49S0PH-L");  // استبدل "pDB0RvlQN49S0PH-L" بـ Public Key الخاص بك
    })();
  </script>

</head>
<body>

  <!-- حقل إدخال الإيميل -->
  <input type="email" id="user-email" placeholder="Enter your email" required>
  
  <!-- زر لإرسال الرمز -->
  <button onclick="sendCode()">Send Verification Code</button>

  <!-- حقل إدخال الرمز (يتم إخفاؤه حتى يتم إرسال الرمز) -->
  <div id="code-container" style="display: none;">
    <input type="text" id="verification-code" placeholder="Enter the code" required>
    <button onclick="verifyCode()">Verify Code</button>
  </div>

  <script>
    // دالة لإرسال الرمز إلى الإيميل
    function sendCode() {
      const email = document.getElementById("user-email").value.trim();  // الحصول على الإيميل من الحقل

      if (!email) {
        alert("Please enter your email.");
        return;
      }

      const code = Math.floor(1000 + Math.random() * 9000); // توليد كود عشوائي مكون من 4 أرقام

      // إرسال الرمز عبر EmailJS
      emailjs.send("service_tid0byc", "template_cfx1qfk", {
        to_email: email,   // الإيميل الذي سيتم إرسال الرمز إليه
        code: code,        // الرمز العشوائي المولد
        email: email       // الإيميل الخاص بالمستخدم
      }).then(function(response) {
        alert("✅ The verification code has been sent to your email!");
        console.log("SUCCESS", response.status, response.text);

        // تخزين الرمز في حقل البيانات
        document.getElementById("code-container").dataset.code = code; 

        // إظهار حقل إدخال الرمز بعد إرسال الرمز
        document.getElementById("code-container").style.display = "block";
      }, function(error) {
        alert("❌ Failed to send the code. Please try again.");
        console.error("FAILED", error);
      });
    }

    // دالة للتحقق من الرمز
    function verifyCode() {
      const enteredCode = document.getElementById("verification-code").value.trim();  // الحصول على الرمز المدخل
      const correctCode = document.getElementById("code-container").dataset.code;  // الرمز المرسل

      if (enteredCode === correctCode) {
        alert("✅ The code has been successfully verified!");
        window.location.href = "your-next-page.html";  // الانتقال إلى الصفحة التالية
      } else {
        alert("❌ The code is incorrect. Please try again.");
      }
    }
  </script>

</body>
</html>




